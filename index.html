<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Math Challenge — MNIST Handwriting</title>
  <link rel="stylesheet" href="./styles.css" />
  <!-- TFJS + WASM -->
  <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@4.22.0/dist/tf.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs-backend-wasm@4.22.0/dist/tf-backend-wasm.min.js"></script>
</head>
<body class="garden">
  <!-- Tiny HUD -->
  <div class="hud-mini">
    <span id="backend">Backend: —</span>
    <span id="modelStatus">Model: Loading…</span>
    <span id="latency">Latency: — ms</span>
  </div>

  <!-- Header -->
  <header class="hero">
    <h1 class="brand">Math Challenge</h1>
    <div class="hero-hud">
      <span id="gameLevel" class="chip">Level 1</span>
      <div class="timer hero-timer"><div id="timerBar"></div></div>
      <span id="gameScore" class="chip">0/10</span>
    </div>
  </header>

  <!-- Stage -->
  <main class="stage">
    <div class="equation">
      <div class="expr">
        <span id="problemText">Click "Start"</span>
        <span id="eqSign" aria-hidden="true">=</span>
        <span id="answerSlots" class="answer-slots">
          <span class="slot" id="slot">_</span>
        </span>
      </div>
    </div>

    <!-- Handwriting canvas -->
    <div class="answer-box">
      <canvas id="pad" width="280" height="280" aria-label="Handwrite your answer"></canvas>
    </div>
  </main>

  <!-- Status message (game hints / results) -->
  <section id="statusWrap" aria-live="polite" aria-atomic="true">
    <div id="statusMessage" class="status" role="status"></div>
  </section>

  <!-- Controls -->
  <section class="controls">
    <button id="btnStartGame" class="btn primary">Start</button>
    <button id="btnSubmit" class="btn accent" disabled>Submit</button>
    <button id="btnGameClear" class="btn">Clear Canvas</button>
  </section>

  <!-- Track -->
  <section class="track-wrap">
    <div class="track">
        <!-- 跑道角色 -->
        <div id="hero" class="actor">😎</div>
        <div id="monster" class="actor">👹</div>

        <!-- 距离 meter（新加） -->
        <div class="track-meter">
        <div class="meter-bg"></div>
        <div id="gapFill" class="meter-fill"></div>
        <div id="gapText" class="meter-text"></div> <!-- 可选：显示剩余步数/像素 -->
        </div>
    </div>
    </section>

  <!-- Logic -->
  <script type="module" src="./js/app.js?v=status-a"></script>
  <script type="module" src="./js/game.js?v=status-a"></script>
</body>
</html>